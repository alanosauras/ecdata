<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Never Finished Boats</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <div id="navigation"></div>
    <script src="nav.js"></script>
    <script src="activelink.js"></script>

    <h4>This list displays unique boat types that have started but never finished a challenge. Only boats with all attempts resulting in DNF are included. Attempts could be from more than one boat in the same year. Note that some boat types are not production boats such as "Custom Sharpie" or "Homemade sailing canoe". These are boats that couldn't be easily named but should be identifiable as non-production boats. If you see an error let me know. </h4><br>

    <table id="neverFinishedBoatDataTable" class="search-results-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Boat Name</th>
                <th>Failed Attempts</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be added here -->
        </tbody>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            updateNeverFinishedBoatsTable();
        });
    
        function updateNeverFinishedBoatsTable() {
            const boatAttempts = {};
            const boatFailures = {};
    
            racedata.forEach(entry => {
                // Include boats that started (exclude DNS)
                if (entry['Total (hrs)'] !== "DNS") {
                    boatAttempts[entry['BOAT']] = (boatAttempts[entry['BOAT']] || 0) + 1;
    
                    if (entry['Total (hrs)'] === "DNF") {
                        boatFailures[entry['BOAT']] = (boatFailures[entry['BOAT']] || 0) + 1;
                    }
                }
            });
    
            // Filter to keep only boats that have never finished (failures = attempts)
            let neverFinishedBoats = Object.keys(boatFailures).filter(boat => boatFailures[boat] === boatAttempts[boat]);
    
            // Sort the boats by most to least failed attempts
            neverFinishedBoats.sort((a, b) => boatFailures[b] - boatFailures[a]);
    
            const tableBody = document.querySelector('#neverFinishedBoatDataTable tbody');
            tableBody.innerHTML = '';
    
            neverFinishedBoats.forEach((boat, index) => {
                const row = tableBody.insertRow();
                const numberCell = row.insertCell(0);
                numberCell.textContent = index + 1;
    
                const boatCell = row.insertCell(1);
                boatCell.textContent = boat;
    
                const failedAttemptsCell = row.insertCell(2);
                failedAttemptsCell.textContent = boatFailures[boat];
            });
        }
    </script>
    
    <script src="racedata.js"></script>
</body>
</html>
